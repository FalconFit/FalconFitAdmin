<div class="scanner-shell">
  <!-- Mostrar el estado actual -->
  <div class="status-message" *ngIf="!isScanning || !hasPermission">
    <p>{{ statusMessage }}</p>
  </div>

  <!-- El esc치ner solo se muestra cuando est치 iniciado y con permisos -->
  <div class="scanner-container" *ngIf="isInitialized">
    <zxing-scanner
      #scanner
      [enable]="isScanning && hasPermission"
      (scanSuccess)="handleQrResult($event)"
      [formats]="allowedFormats">
    </zxing-scanner>
  </div>

  <!-- Controles para el usuario -->
  <div class="controls" *ngIf="isInitialized && hasPermission">
    <button (click)="toggleScanner()">
      {{ isScanning ? 'Pausar esc치ner' : 'Activar esc치ner' }}
    </button>

    <button *ngIf="qrResultString" (click)="resetScan()">
      Nuevo escaneo
    </button>
  </div>

  <!-- Resultados -->
  <section class="results" *ngIf="qrResultString">
    <small>Resultado:</small>
    <strong>{{qrResultString}}</strong>
  </section>
</div>
